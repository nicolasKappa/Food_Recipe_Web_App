-- Create the database
CREATE DATABASE recipe_app_database;

-- Use the database
USE recipe_app_database;

-- Create Users table
CREATE TABLE Users (
    UserID INT PRIMARY KEY AUTO_INCREMENT,
    Username VARCHAR(50) NOT NULL,
    Password VARCHAR(100) NOT NULL,
    Email VARCHAR(100) NOT NULL
);

-- Create Favorites table
CREATE TABLE Favorites (
    FavoriteID INT PRIMARY KEY AUTO_INCREMENT,
    UserID INT,
    RecipeID INT,
    FOREIGN KEY (UserID) REFERENCES Users(UserID),
    FOREIGN KEY (RecipeID) REFERENCES Recipes(RecipeID)
);

-- Create UserRating table
CREATE TABLE UserRating (
    LikeID INT PRIMARY KEY AUTO_INCREMENT,
    UserID INT,
    RecipeID INT,
    Rating INT,
    FOREIGN KEY (UserID) REFERENCES Users(UserID),
    FOREIGN KEY (RecipeID) REFERENCES Recipes(RecipeID)
);

-- Create Recipes table
CREATE TABLE Recipes (
    RecipeID INT PRIMARY KEY AUTO_INCREMENT,
    Title VARCHAR(100) NOT NULL,
    Description TEXT,
    PreparationTime TIME,
    CookingTime TIME,
    NrServed TEXT,
    PictureURL TEXT
);

-- Create Recipe_Category table
CREATE TABLE Recipe_Category (
    Recipe_Category_ID INT PRIMARY KEY AUTO_INCREMENT,
    RecipeID INT,
    CategoryID INT,
    FOREIGN KEY (RecipeID) REFERENCES Recipes(RecipeID),
    FOREIGN KEY (CategoryID) REFERENCES Categories(CategoryID)
);

-- Create lkpCategories table
CREATE TABLE lkpCategories (
    CategoryID INT PRIMARY KEY AUTO_INCREMENT,
    Name VARCHAR(50) NOT NULL
);

-- Create Recipe_Ingredient table
CREATE TABLE Recipe_Ingredient (
    Recipe_Ingredient_ID INT PRIMARY KEY AUTO_INCREMENT,
    RecipeID INT,
    IngredientID INT,
    Quantity INT,
    UOMID INT,
    MethodID INT, 
    FOREIGN KEY (RecipeID) REFERENCES Recipes(RecipeID),
    FOREIGN KEY (IngredientID) REFERENCES lkpIngredients(IngredientID),
    FOREIGN KEY (UOMID) REFERENCES lkpUnitOfMeasure(UOMID),
    FOREIGN KEY (MethodID) REFERENCES lkpMethod(MethodID)
);

-- Create lkpMethod table
CREATE TABLE lkpMethod (
    MethodID INT PRIMARY KEY AUTO_INCREMENT,
    Name VARCHAR(50) NOT NULL
);

-- Create lkpUnitOfMeasure table
CREATE TABLE lkpUnitOfMeasure (
    UOMID INT PRIMARY KEY AUTO_INCREMENT,
    Name VARCHAR(50) NOT NULL
);

-- Create lkpIngredients table
CREATE TABLE lkpIngredients (
    IngredientID INT PRIMARY KEY AUTO_INCREMENT,
    Name VARCHAR(50) NOT NULL
);

-- Create Recipe_Steps table
CREATE TABLE Recipe_Steps (
    Recipe_Method_ID INT PRIMARY KEY AUTO_INCREMENT,
    RecipeID INT,
    StepNr INT,
    Description TEXT,
    MinutesNeeded INT, 
    FOREIGN KEY (RecipeID) REFERENCES Recipes(RecipeID)
);

-- Create Recipe_Tips table
CREATE TABLE Recipe_Tips (
    Recipe_Tip_ID INT,
    RecipeID INT,
    TipNr INT,
    Description TEXT,
    FOREIGN KEY (RecipeID) REFERENCES Recipes(RecipeID)
);
